<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link href="./styles.css" rel="stylesheet" type="text/css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.18.1/babel.min.js"></script>
  <script src="https://fb.me/react-15.1.0.js"></script>
  <script src="https://fb.me/react-dom-15.1.0.js"></script>
  <script>
    // Demo workaround, fix UMD exports
    window.react = React
    window['react-dom'] = ReactDOM
  </script>
  <script src="../es5/index.js"></script>
  <title>react-tiny-validator</title>
</head>
<body>
  <div id="app"></div>
  <script type="text/babel" data-presets="es2015,stage-0,react">
    // Demo workaround, fix imports
    // Normally use:
    //
    // import Validate from 'react-tiny-validator'
    // import Raact, {Component, PropTypes} from 'react
    // import {render} from 'react-dom'

    const {default:Validate} = window['react-tiny-validator']
    const React = window['react']
    const {Component, PropTypes} = window['react']
    const {render} = window['react-dom']

    const minlength = length => value => {
      if (value.length < length) return 'Should be longer then ' + length
    }

    const emaillike = value => {
      if (!/\w+@\w+/.test(value)) return 'Does not look like email'
    }

    const App = () => (
      <Validate value={''}
        onChange={goodValue => this.setState({email: goodValue})}
        validators={[minlength(5), emaillike]}>
        {({value, onChange, pristine, valid, errors, check}) => (
          <div>
            <h2 className={pristine ? '' : (valid ? 'valid' : 'invalid')}>
              value : <b>{JSON.stringify(value)}</b>
            </h2>
            <p>Not validated until lost the focus</p>
            <input type="text"
              placeholder="Input email"
              value={value}
              onChange={e => onChange(e.target.value, true)}
              onBlur={check} />
            <p>Is pristine: {pristine ? 'YES' : 'NO'}</p>
            {!pristine && !valid && (
              <ul className="invalid">
                {errors.map(error => <li key={error}>{error}</li>)}
              </ul>
            )}
          </div>
        )}
      </Validate>
    )

    render(<App />, document.getElementById('app'))
  </script>
</body>
</html>
